<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能简历生成系统</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-file-alt"></i> 智能简历生成系统</h1>
            <p>快速创建专业的LaTeX简历</p>
        </header>

        <div class="main-content">
            <!-- 左侧表单 -->
            <div class="form-section">
                <form id="resumeForm">
                    <!-- 求职类型选择 -->
                    <div class="form-group">
                        <h2><i class="fas fa-user-tag"></i> 求职类型</h2>
                        <div class="form-row">
                            <div class="form-field">
                                <label>
                                    <input type="radio" name="recruitmentType" value="campus" checked onchange="toggleWorkExperience()"> 校园招聘
                                </label>
                                <label>
                                    <input type="radio" name="recruitmentType" value="social" onchange="toggleWorkExperience()"> 社会招聘
                                </label>
                            </div>
                        </div>
                        <!-- Add this new button -->
                        <div class="form-row">
                            <div class="form-field">
                                <button type="button" class="btn-load-latest" onclick="loadLatestResume()">
                                    <i class="fas fa-history"></i> 加载最近简历
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 基本信息 -->
                    <div class="form-group">
                        <h2><i class="fas fa-user"></i> 基本信息</h2>
                        <div class="form-row">
                            <div class="form-field">
                                <label for="name">姓名 *</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-field">
                                <label for="jobTitle">求职职位 *</label>
                                <input type="text" id="jobTitle" name="jobTitle" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-field">
                                <label for="phone">电话 *</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                            <div class="form-field">
                                <label for="email">邮箱 *</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                        </div>

                        <div class="form-field">
                            <label for="address">地址</label>
                            <input type="text" id="address" name="address">
                        </div>

                        <!-- 替换原来的 file input 区域 -->
                        <div class="form-field photo-field">
                            <label>头像（选填）</label>
                            <!-- 按钮式触发 -->
                            <label for="photoInput" class="btn-photo">
                                <i class="fas fa-camera"></i> 选择照片
                            </label>
                            <input type="file" id="photoInput" accept="image/*" onchange="handlePhoto(this)">

                            <div class="photo-preview" id="photoPreview">
                                <img id="photoImg" src="" alt="头像预览" style="display:none;">
                                <button type="button" class="btn-remove" onclick="removePhoto()" style="display:none;">删除</button>
                            </div>
                        </div>

                    </div>

                    <!-- 教育背景 -->
                    <div class="form-group">
                        <h2><i class="fas fa-graduation-cap"></i> 教育背景</h2>
                        <div id="educationEntries">
                            <div class="education-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>学历</label>
                                        <input type="text" name="educationDegree[]" placeholder="例如：计算机科学硕士" required>
                                    </div>
                                    <div class="form-field">
                                        <label>时间</label>
                                        <input type="text" name="educationPeriod[]" placeholder="例如：2018-2022" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>学校</label>
                                        <input type="text" name="educationSchool[]" placeholder="例如：清华大学" required>
                                    </div>
                                    <div class="form-field">
                                        <label>成绩</label>
                                        <input type="text" name="educationGPA[]" placeholder="例如：GPA 3.8/4.0">
                                    </div>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeEducation(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addEducation()">
                            <i class="fas fa-plus"></i> 添加教育经历
                        </button>
                    </div>

                    <!-- 工作经历 -->
                    <div class="form-group" id="workExperienceSection">
                        <h2><i class="fas fa-briefcase"></i> 工作经历</h2>
                        <div id="experienceEntries">
                            <div class="experience-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>职位</label>
                                        <input type="text" name="experienceTitle[]" placeholder="例如：高级软件工程师" required>
                                    </div>
                                    <div class="form-field">
                                        <label>时间</label>
                                        <input type="text" name="experiencePeriod[]" placeholder="例如：2020-至今" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>公司</label>
                                        <input type="text" name="experienceCompany[]" placeholder="例如：ABC科技有限公司" required>
                                    </div>
                                    <div class="form-field">
                                        <label>地点</label>
                                        <input type="text" name="experienceLocation[]" placeholder="例如：北京">
                                    </div>
                                </div>
                                <div class="form-field">
                                    <label>工作描述</label>
                                    <textarea name="experienceDescription[]" placeholder="描述你的工作职责和成就..." rows="3"></textarea>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeExperience(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addExperience()">
                            <i class="fas fa-plus"></i> 添加工作经历
                        </button>
                    </div>

                    <!-- 技能 -->
                    <div class="form-group">
                        <h2><i class="fas fa-cogs"></i> 技能专长</h2>
                        <div id="skillEntries">
                            <div class="skill-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>技能名称</label>
                                        <input type="text" name="skillName[]" placeholder="例如：Java/Spring" required>
                                    </div>
                                    <div class="form-field">
                                        <label>熟练程度 (1-20)</label>
                                        <input type="number" name="skillLevel[]" min="1" max="20" value="10" required>
                                    </div>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeSkill(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addSkill()">
                            <i class="fas fa-plus"></i> 添加技能
                        </button>
                    </div>

                    <!-- 项目经验 -->
                    <div class="form-group">
                        <h2><i class="fas fa-project-diagram"></i> 项目经验</h2>
                        <div id="projectEntries">
                            <div class="project-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>项目名称</label>
                                        <input type="text" name="projectName[]" placeholder="例如：智能推荐系统" required>
                                    </div>
                                    <div class="form-field">
                                        <label>时间</label>
                                        <input type="text" name="projectPeriod[]" placeholder="例如：2021.03-2021.12" required>
                                    </div>
                                </div>
                                <div class="form-field">
                                    <label>项目描述</label>
                                    <textarea name="projectDescription[]" placeholder="描述项目内容和你的贡献..." rows="3"></textarea>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeProject(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addProject()">
                            <i class="fas fa-plus"></i> 添加项目
                        </button>
                    </div>
                    <!-- 自我评价 -->
                    <div class="form-group">
                        <h2><i class="fas fa-comment"></i> 自我评价</h2>
                        <div class="form-field">
                            <label for="selfEvaluation">简要描述自己的技能掌握情况以及对自我的评价</label>
                            <textarea id="selfEvaluation" name="selfEvaluation" placeholder="请简要描述您的技能掌握情况以及对自我的评价..." rows="5"></textarea>
                        </div>
                    </div>

                    <!-- 个人荣誉 -->
                    <div class="form-group">
                        <h2><i class="fas fa-trophy"></i> 个人荣誉</h2>
                        <div id="honorEntries">
                            <div class="honor-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>奖项/荣誉名称</label>
                                        <input type="text" name="honorName[]" placeholder="例：国家奖学金" required>
                                    </div>
                                    <div class="form-field">
                                        <label>获得时间</label>
                                        <input type="text" name="honorPeriod[]" placeholder="例：2022-10" required>
                                    </div>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeHonor(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addHonor()">
                            <i class="fas fa-plus"></i> 添加荣誉
                        </button>
                    </div>

                    <!-- 外语水平 -->
                    <div class="form-group">
                        <h2><i class="fas fa-language"></i> 外语水平</h2>
                        <div id="languageEntries">
                            <div class="language-entry entry-item">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label>语言</label>
                                        <input type="text" name="languageName[]" placeholder="例：英语" required>
                                    </div>
                                    <div class="form-field">
                                        <label>等级/分数</label>
                                        <input type="text" name="languageLevel[]" placeholder="例：CET-6 560" required>
                                    </div>
                                </div>
                                <button type="button" class="btn-remove" onclick="removeLanguage(this)">删除</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add" onclick="addLanguage()">
                            <i class="fas fa-plus"></i> 添加语言
                        </button>
                    </div>

                    <!-- 模板选择 -->
                    <div class="form-group">
                        <h2><i class="fas fa-palette"></i> 简历模板</h2>
                        <div class="template-selection">
                            <div class="template-option">
                                <input type="radio" id="template1" name="template" value="modern" checked>
                                <label for="template1">
                                    <div class="template-preview modern-preview">
                                        <div class="preview-header"></div>
                                        <div class="preview-content">
                                            <div class="preview-sidebar"></div>
                                            <div class="preview-main"></div>
                                        </div>
                                    </div>
                                    <span>现代风格</span>
                                </label>
                            </div>
                            <div class="template-option">
                                <input type="radio" id="template2" name="template" value="classic">
                                <label for="template2">
                                    <div class="template-preview classic-preview">
                                        <div class="preview-header"></div>
                                        <div class="preview-content">
                                            <div class="preview-main"></div>
                                        </div>
                                    </div>
                                    <span>经典风格</span>
                                </label>
                            </div>
                            <div class="template-option">
                                <input type="radio" id="template3" name="template" value="creative">
                                <label for="template3">
                                    <div class="template-preview creative-preview">
                                        <div class="preview-header"></div>
                                        <div class="preview-content">
                                            <div class="preview-sidebar"></div>
                                            <div class="preview-main"></div>
                                        </div>
                                    </div>
                                    <span>创意风格</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 提交按钮 -->
                    <div class="form-actions">
                        <button type="button" class="btn-preview" onclick="previewResume()">
                            <i class="fas fa-eye"></i> 预览简历
                        </button>
                        <button type="button" class="btn-save" onclick="saveResume()">
                            <i class="fas fa-save"></i> 保存简历
                        </button>
                        <button type="submit" class="btn-generate">
                            <i class="fas fa-download"></i> 生成PDF简历
                        </button>
                    </div>
                </form>
            </div>

            <!-- 右侧预览 -->
            <div class="preview-section">
                <div class="preview-header">
                    <h3><i class="fas fa-file-pdf"></i> 简历预览</h3>
                    <button type="button" class="btn-refresh" onclick="refreshPreview()">
                        <i class="fas fa-sync-alt"></i> 刷新预览
                    </button>
                </div>
                <div class="preview-content">
                    <div id="resumePreview" class="resume-preview">
                        <div class="preview-placeholder">
                            <i class="fas fa-file-alt"></i>
                            <p>填写左侧表单后点击"预览简历"查看效果</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载动画 -->
    <div id="loading" class="loading hidden">
        <div class="loading-spinner"></div>
        <p>正在生成PDF，请稍候...</p>
    </div>

    <script src="js/app.js"></script>
</body>
</html>